/* prettier-ignore */
class AeroUtilities{static instances=[];constructor(e={}){this.breakpoints={xxl:1536,xl:1280,lg:1024,md:768,sm:641,xs:0},this.options=e,this.activeBreakpoint=null,"reorder"===this.options.type?(this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize),this.handleResize(),this.observeDynamicElements()):this.options.type&&"start"!==this.options.type||(this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize),this.updateBodyClass()),this.initMutationObserver(),AeroUtilities.instances.push(this)}observeDynamicElements(){const e=this.options.element,t=t=>{t.forEach((t=>{if("childList"===t.type&&t.addedNodes.length>0){Array.from(t.addedNodes).filter((t=>t.classList&&t.classList.contains(e.substring(1)))).forEach((e=>{this.handleDynamicElement(e)}))}}))},i=document.querySelector(e);if(i){const e={childList:!0,subtree:!0};new MutationObserver(t).observe(i,e)}}handleDynamicElement(e){const t=this.getActiveBreakpoint(window.innerWidth);this.moveElements(t,e)}handleResize(){const e=window.innerWidth,t=this.getActiveBreakpoint(e);"reorder"===this.options.type?this.moveElements(t):this.options.type&&"start"!==this.options.type||t===this.activeBreakpoint||this.updateBodyClass(t)}getActiveBreakpoint(e){for(const[t,i]of Object.entries(this.breakpoints))if(e>=i)return t}moveElements(e,t=null){const[i,s]=this.options[e]||[],n=t||document.querySelector(this.options.element),o=document.querySelector(i);n&&o&&e!==this.activeBreakpoint&&(this.applyMoveMethod(n,o,s),this.activeBreakpoint=e)}initMutationObserver(){const e=document.documentElement;this.mutationObserver=new MutationObserver((e=>{for(const t of e)"childList"===t.type&&t.addedNodes.forEach((e=>{1===e.nodeType&&e.matches(this.options.element)&&this.handleResize()}))})),this.mutationObserver.observe(e,{childList:!0,subtree:!0})}applyMoveMethod(e,t,i){"prependTo"===i?t.prepend(e):"appendTo"===i?t.appendChild(e):"insertBefore"===i?t.parentNode.insertBefore(e,t):"insertAfter"===i&&t.parentNode.insertBefore(e,t.nextSibling)}camelToKebab(e){return"string"!=typeof e?e:e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}updateBodyClass(e){const t=e||this.getActiveBreakpoint(window.innerWidth);t!==this.activeBreakpoint&&(this.removeBodyClass(this.activeBreakpoint),this.addBodyClass(t),this.activeBreakpoint=t)}addBodyClass(e){const t=this.camelToKebab(e);document.body.classList.add(`${t}`)}removeBodyClass(e){const t=this.camelToKebab(e);document.body.classList.remove(`${t}`)}updateBreakpoints(e){this.breakpoints=e,this.handleResize()}static updateAllBreakpoints(e){AeroUtilities.instances.forEach((t=>{t.updateBreakpoints(e)}))}}
export default AeroUtilities;
